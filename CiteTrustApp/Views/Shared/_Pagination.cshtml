@{
    var page = ViewBag.Page as int? ?? 1;
    var pageSize = ViewBag.PageSize as int? ?? 12;
    var total = ViewBag.TotalCount as int? ?? 0;
    var totalPages = (int)Math.Ceiling((double)total / pageSize);
    if (totalPages < 1) { totalPages = 1; }
}

@if (total > 0)
{
    <div class="d-flex justify-content-center">
        <nav aria-label="Page navigation">
            <ul class="pagination mb-0">
                <li class="page-item @(page <= 1 ? "disabled" : "")">
                    <a class="page-link page-link-go" href="#" data-page="@(page - 1)">‹</a>
                </li>

                @{
                    var start = Math.Max(1, page - 3);
                    var end = Math.Min(totalPages, page + 3);
                    if (start > 1)
                    {
                        <li class="page-item"><a class="page-link page-link-go" href="#" data-page="1">1</a></li>
                        if (start > 2)
                        {
                            <li class="page-item disabled"><span class="page-link">…</span></li>
;
                        }
                    }
                    for (var p = start; p <= end; p++)
                    {
                        <li class="page-item @(p == page ? "active" : "")">
                            <a class="page-link page-link-go" href="#" data-page="@p">@p</a>
                        </li>
                    }
                    if (end < totalPages)
                    {
                        if (end < totalPages - 1)
                        {
                            <li class="page-item disabled"><span class="page-link">…</span></li>
;
                        }
                        <li class="page-item"><a class="page-link page-link-go" href="#" data-page="@totalPages">@totalPages</a></li>
                    }
                }

                <li class="page-item @(page >= totalPages ? "disabled" : "")">
                    <a class="page-link page-link-go" href="#" data-page="@(page + 1)">›</a>
                </li>
            </ul>
        </nav>
    </div>
}